<lccdd>
  <comment>
    //////////////////////////////////////////////////
    // Far Forward Zero Degree Calorimeter
    // WSi with Pixels on layers 3, 6 and 9
    //////////////////////////////////////////////////
  </comment>

  <define>
    <constant name="ZDC_WSi_x"       value="60*cm"/>
    <constant name="ZDC_WSi_y"       value="60*cm"/>

    <constant name="ZDC_rotateX_angle" value="0.0 * rad"/>
    <constant name="ZDC_rotateY_angle" value="ionCrossingAngle"/>
    <constant name="ZDC_rotateZ_angle" value="0.0 * rad"/>

    <constant name="ZDC_WSi_r_pos"               value="35.8564*m"/>
    <constant name="ZDC_WSi_z_pos"               value="ZDC_WSi_r_pos * cos(ionCrossingAngle)"/>
    <constant name="ZDC_WSi_x_pos"               value="ZDC_WSi_r_pos * sin(ionCrossingAngle)"/>
    <constant name="ZDC_WSi_y_pos"               value="0 * cm" />
    <constant name="ZDC_WSi_rotateX_angle"       value="ZDC_rotateX_angle"/>
    <constant name="ZDC_WSi_rotateY_angle"       value="ZDC_rotateY_angle"/>
    <constant name="ZDC_WSi_rotateZ_angle"       value="ZDC_rotateZ_angle"/>
    <constant name="ZDC_WSi_pad_nlayers_per_block"         value="5"/>

    <constant name="ZDC_pad_thickness"           value="320.0 * um"/>
    <constant name="ZDC_pixel_thickness"         value="300.0 * um"/>
    <constant name="ZDC_glue_thickness"          value="0.11 * mm"/>
    <constant name="ZDC_PCB_thickness"           value="1.6 * mm"/>
    <constant name="ZDC_Si_Air_thickness"        value="1 * mm"/>
    <constant name="ZDC_Tungsten_thickness"      value="3.5 * mm"/>

    //Modified, total count should be 20 for correct length
    <constant name="ZDC_WSi_pix_nlayers" value="3"/>
    <constant name="ZDC_WSi_pad_nlayers" value="17"/>
    <constant name="ZDC_WSi_pad_layerthickness"
              value="ZDC_Tungsten_thickness + ZDC_glue_thickness + ZDC_pad_thickness + ZDC_glue_thickness + ZDC_PCB_thickness + ZDC_Si_Air_thickness"/>
    <constant name="ZDC_WSi_pixel_layerthickness"
              value="ZDC_Tungsten_thickness + ZDC_glue_thickness + ZDC_pixel_thickness + ZDC_glue_thickness + ZDC_PCB_thickness + ZDC_Si_Air_thickness"/>
    <constant name="ZDC_WSi_z"
              value="ZDC_WSi_pix_nlayers * ZDC_WSi_pixel_layerthickness + ZDC_WSi_pad_nlayers * ZDC_WSi_pad_layerthickness"/>
  </define>

  //Following pattern: layer 4, layer 8 and layer 12 have HG
  <detectors>
  	<detector
        id="ZDC_WSi_ID"
        name="ZDC_WSi"
        type="ZDC_ImagingCal"
        vis="ZDC_WSi_Vis"
        readout="ZDC_WSi_Hits">
      <position x="ZDC_WSi_x_pos"         y="ZDC_WSi_y_pos"         z="ZDC_WSi_z_pos"/>
      <rotation x="ZDC_WSi_rotateX_angle" y="ZDC_WSi_rotateY_angle" z="ZDC_WSi_rotateZ_angle"/>
      <dimensions x="ZDC_WSi_x" y="ZDC_WSi_y" z="ZDC_WSi_z"/>
      <layer id="1" nlayer="3" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"    material="Silicon" thickness="ZDC_pad_thickness"   vis="AnlTeal"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>
      <layer id="2" nlayer="1" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"   material="Silicon" thickness="ZDC_pixel_thickness"   vis="AnlRed"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>
      <layer id="3" nlayer="3" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"   material="Silicon" thickness="ZDC_pad_thickness"   vis="AnlTeal"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>
      <layer id="4" nlayer="1" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"   material="Silicon" thickness="ZDC_pixel_thickness"   vis="AnlRed"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>
      <layer id="5" nlayer="3" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"   material="Silicon" thickness="ZDC_pad_thickness"   vis="AnlRed"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>
      <layer id="6" nlayer="1" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"   material="Silicon" thickness="ZDC_pixel_thickness"   vis="AnlRed"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>
      <layer id="7" nlayer="8" gapspace="ZDC_Si_Air_thickness">
        <slice name="tungsten"  material="ZDC_Tungsten"     thickness="ZDC_Tungsten_thickness"  vis="AnlLightGray"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="silicon"   material="Silicon" thickness="ZDC_pad_thickness"   vis="AnlRed"  sensitive="true"/>
        <slice name="glue"      material="G10"     thickness="ZDC_glue_thickness"  vis="AnlLightGray"/>
        <slice name="pcb"       material="ZDC_PET" thickness="ZDC_PCB_thickness"   vis="AnlGreen"/>
      </layer>

 
    </detector>
  </detectors>

  <readouts>
	  //Readding multisegmentation from original file
	  <readout name="ZDC_WSi_Hits">
      	    <segmentation type="MultiSegmentation" key="silicon">
              <segmentation name="WSi_Pixel_L1" type="CartesianGridXY" key_value="4" grid_size_x=".5*mm" grid_size_y=".5*mm"/>
              <segmentation name="WSi_Pixel_L2" type="CartesianGridXY" key_value="8" grid_size_x=".5*mm" grid_size_y=".5*mm"/>
              <segmentation name="WSi_Pixel_L3" type="CartesianGridXY" key_value="12" grid_size_x=".5*mm" grid_size_y=".5*mm"/>
              <segmentation name="WSi_Pad1"   type="CartesianGridXY" key_min="1" key_max="3" grid_size_x="1.*cm" grid_size_y="1.*cm"/>
              <segmentation name="WSi_Pad2"   type="CartesianGridXY" key_min="5" key_max="7" grid_size_x="1.*cm" grid_size_y="1.*cm"/>
	      <segmentation name="WSi_Pad3"   type="CartesianGridXY" key_min="9" key_max="11" grid_size_x="1.*cm" grid_size_y="1.*cm"/>
              <segmentation name="WSi_Pad4"   type="CartesianGridXY"  key_min="13" key_max="20" grid_size_x="1.*cm" grid_size_y="1.*cm"/>
            </segmentation>
            <id>system:8,silicon:6,x:24:-12,y:-12</id>
          </readout>
  </readouts>

</lccdd>
